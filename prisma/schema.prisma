// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

//////////////////// ENUMS ////////////////////

// ìœ ì € ì—­í• 
enum UserType {
  CUSTOMER // ì¼ë°˜ ìœ ì €
  DRIVER // ê¸°ì‚¬ë‹˜
}

// ë¡œê·¸ì¸ ì œê³µì
enum AuthProvider {
  LOCAL // ìì²´ ê°€ì…
  GOOGLE // êµ¬ê¸€
  NAVER // ë„¤ì´ë²„
  KAKAO // ì¹´ì¹´ì˜¤
}

// ì´ì‚¬ ìœ í˜•
enum MoveType {
  SMALL
  HOME
  OFFICE
}

// ê²¬ì  ìš”ì²­ ìƒíƒœ
enum RequestStatus {
  PENDING // (ì‹œìŠ¤í…œìƒ)ê³ ê°ì´ ì´ì‚¬ìš”ì²­ì„œë¥¼ ì‘ì„±í•œ ì§í›„, ê²¬ì  ê¸°ë‹¤ë¦¬ëŠ”ìƒíƒœ
  APPROVED // (ê³ ê°) ê³ ê°ì´ ê¸°ì‚¬ë‹˜ì˜ê²¬ì ì¤‘ í•˜ë‚˜ê²¬ì ì„ ìˆ˜ë½í•¨
  COMPLETED // (ê´€ë¦¬ì/ê¸°ì‚¬ë‹˜ìˆ˜ë™) ì‹¤ì œ ì´ì‚¬ê°€ ì™„ë£Œë¨
  REJECTED // (ê´€ë¦¬ì/ì§€ì •ê¸°ì‚¬) ê´€ë¦¬ì/ê¸°ì‚¬ê°€ ê³ ê°ìš”ì²­ì„œë¥¼ ë°˜ë ¤í•œ ìƒíƒœ(ê¸°ì‚¬ë‹˜ì´ ê³ ê°ì˜ ê²¬ì  ìš”ì²­ì„œ ìì²´ë¥¼ ë°˜ë ¤í•˜ëŠ” ê²½ìš°)
  CANCELLED // (ê³ ê°) ê³ ê°ì´ ì´ì‚¬ìš”ì²­ì„ ì§ì ‘ ì·¨ì†Œ
  EXPIRED // (ì‹œìŠ¤í…œ) ê²¬ì ìˆ˜ë½ê¸°í•œì´ ì§€ë‚˜ ìë™ ë§Œë£Œ
}

// ê²¬ì  ì‘ë‹µ ìƒíƒœ
enum EstimateStatus {
  PROPOSED // (ê¸°ì‚¬) ê¸°ì‚¬ë‹˜ì´ ê¸°ì‚¬ê²¬ì ì„ ë³´ë‚¸ ì§í›„ / ê¸°ì‚¬ ì œì•ˆ ìƒíƒœ
  ACCEPTED // (ê³ ê°) ê³ ê°ì´ í•´ë‹¹ ê²¬ì ì„ ì„ íƒí•¨
  REJECTED // (ê¸°ì‚¬) ê¸°ì‚¬ë‹˜ì´ ì§ì ‘ ë°˜ë ¤ì²˜ë¦¬í•¨(ê¸°ì‚¬ë‹˜ì´ ìì‹ ì´ ì œì•ˆí•œ ê²¬ì ì„ ì§ì ‘ ë°˜ë ¤í•˜ëŠ” ê²½ìš°)
  AUTO_REJECTED // (ì‹œìŠ¤í…œ) ê³ ê°ì´ ë‹¤ë¥¸ê²¬ì ì„ ìˆ˜ë½í–ˆê¸° ë•Œë¬¸ì— ìë™ ë°˜ë ¤ë¨
}

// ì£¼ì†Œ ì—­í•  (ê³ ê° ê¸°ì¤€)
enum AddressRole {
  FROM // ì¶œë°œì§€
  TO // ë„ì°©ì§€
  EXTRA // ê¸°íƒ€ ì£¼ì†Œ (ì˜ˆ: ì§ ë³´ê´€ì²˜ ë“±)
}

// ì „êµ­ ê´‘ì—­ì‹œ/ë„ (RegionType)
enum RegionType {
  SEOUL
  BUSAN
  DAEGU
  INCHEON
  GWANGJU
  DAEJEON
  ULSAN
  SEJONG
  GYEONGGI
  GANGWON
  CHUNGBUK
  CHUNGNAM
  JEONBUK
  JEONNAM
  GYEONGBUK
  GYEONGNAM
  JEJU
}

// ì•Œë¦¼ ì¢…ë¥˜
enum NotificationType {
  ESTIMATE_REQUEST // ê²¬ì  ìš”ì²­ì´ ë°œìƒí•¨
  ESTIMATE_ACCEPTED // ê²¬ì ì´ ìˆ˜ë½ë¨
  ESTIMATE_REJECTED // ê²¬ì ì´ ë°˜ë ¤ë¨
  MOVE_COMPLETED // ì´ì‚¬ ì™„ë£Œ ì•Œë¦¼
  REVIEW_REQUESTED // ë¦¬ë·° ìš”ì²­ ì•Œë¦¼
  MESSAGE // ì¼ë°˜ ë©”ì‹œì§€
  MOVE_CONFIRMED // ì´ì‚¬ í™•ì • ì•Œë¦¼
  DESIGNATED_REQUEST // ì§€ì • ê²¬ì  ìš”ì²­ ì•Œë¦¼
  MOVE_DAY_REMINDER // ì´ì‚¬ ë‹¹ì¼ ì•Œë¦¼
  REVIEW_RECEIVED // ë¦¬ë·° ë“±ë¡ ì•Œë¦¼
  WELCOME // íšŒì›ê°€ì… ì•Œë¦¼
  ESTIMATE_PROPOSAL // ê²¬ì  ì œì•ˆ
}

// ë‹¤êµ­ì–´ ì§€ì› ì–¸ì–´ ì½”ë“œ
enum LangCode {
  ko
  en
  zh
}

//////////////////// MODELS ////////////////////

// @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
// âš ï¸ AuthUser, Customer, Driver ëª¨ë¸ì€ ë³€ê²½ ê¸ˆì§€!
// ğŸ‘‰ ì¸ì¦ ë° ê¶Œí•œ ë¡œì§ê³¼ ì—°ê²°ë˜ì–´ ìˆì–´ êµ¬ì¡° ë³€ê²½ ì‹œ ì¹˜ëª…ì  ì˜¤ë¥˜ ë°œìƒ ê°€ëŠ¥
// @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@

// ê³µí†µ ì¸ì¦ ì •ë³´ (ëª¨ë“  ì‚¬ìš©ì ê³µí†µ)
model AuthUser {
  id         String       @id @default(cuid()) // ê³ ìœ  ID
  email      String       @unique // ì´ë©”ì¼ (ê³ ìœ )
  password   String? // ë¹„ë°€ë²ˆí˜¸ (ì†Œì…œ ë¡œê·¸ì¸ì€ null ê°€ëŠ¥)
  phone      String? // ì „í™”ë²ˆí˜¸
  name       String //ê³µí†µ ì‹¤ëª… í•„ë“œ (íšŒì›ê°€ì… ì‹œ ì…ë ¥, ìˆ˜ì • ê°€ëŠ¥)
  userType   UserType // ìœ ì € íƒ€ì… (CUSTOMER / DRIVER)
  provider   AuthProvider @default(LOCAL) // ë¡œê·¸ì¸ ì œê³µì (ë¡œì»¬/ì†Œì…œ)
  providerId String? // ì†Œì…œ ë¡œê·¸ì¸ ID
  createdAt  DateTime     @default(now()) // ìƒì„±ì¼
  updatedAt  DateTime     @updatedAt // ìˆ˜ì •ì¼
  deletedAt  DateTime? // ì†Œí”„íŠ¸ ì‚­ì œ

  // ê´€ê³„
  customer              Customer? // ì¼ë°˜ ìœ ì € ì •ë³´
  driver                Driver? // ê¸°ì‚¬ë‹˜ ì •ë³´
  receivedNotifications Notification[] @relation("ReceivedNoti") // ë°›ì€ ì•Œë¦¼
  sentNotifications     Notification[] @relation("SentNoti") // ë³´ë‚¸ ì•Œë¦¼
}

// ì¼ë°˜ ì‚¬ìš©ì ìƒì„¸ ì •ë³´
model Customer {
  id           String     @id @default(cuid())
  authUserId   String     @unique // AuthUserì™€ ì—°ê²°
  profileImage String? // í”„ë¡œí•„ ì´ë¯¸ì§€ URL
  moveType     MoveType[] // ì´ì‚¬ ìœ í˜• í•„ìˆ˜ê°’ìœ¼ë¡œ ë³€ê²½
  currentArea  String // í˜„ì¬ ìœ„ì¹˜(ì‹œ/êµ°/êµ¬) í•„ìˆ˜ê°’ìœ¼ë¡œ ë³€ê²½ ì¶”ê°€ ìˆ˜ì • í•  ìˆ˜ë„ ìˆìŒ
  moveDate     DateTime? // ì´ì‚¬ ë‚ ì§œ
  deletedAt    DateTime? // ì†Œí”„íŠ¸ ì‚­ì œ

  authUser  AuthUser          @relation(fields: [authUserId], references: [id])
  requests  EstimateRequest[] // ê³ ê°ì´ ìƒì„±í•œ ì´ì‚¬ ìš”ì²­ë“¤
  reviews   Review[] // ì‘ì„±í•œ ë¦¬ë·° ëª©ë¡
  favorites Favorite[] // ì°œí•œ ê¸°ì‚¬ë‹˜ ëª©ë¡
  addresses CustomerAddress[] // ì—°ê²°ëœ ì£¼ì†Œ ëª©ë¡ (ë‹¤ëŒ€ë‹¤, ì—­í•  í¬í•¨)

  languagePrefId String?             @unique // ì–¸ì–´ ì„¤ì • ID
  languagePref   LanguagePreference? @relation("CustomerLanguage", fields: [languagePrefId], references: [id])
}

// ê¸°ì‚¬ë‹˜ ìƒì„¸ ì •ë³´
model Driver {
  id                 String                    @id @default(cuid())
  authUserId         String                    @unique // AuthUserì™€ ì—°ê²°
  nickname           String                    @unique // ë‹‰ë„¤ì„
  profileImage       String? // í”„ë¡œí•„ ì´ë¯¸ì§€
  shortIntro         String // ê°„ë‹¨ ì†Œê°œ í•„ìˆ˜ê°’ìœ¼ë¡œ ë³€ê²½
  detailIntro        String // ìƒì„¸ ì†Œê°œ í•„ìˆ˜ê°’ìœ¼ë¡œ ë³€ê²½
  moveType           MoveType[] // ì œê³µ ì„œë¹„ìŠ¤ í•„ìˆ˜ê°’ìœ¼ë¡œ ë³€ê²½
  career             Int //Stringì—ì„œ Intë¡œ íƒ€ì…ë§Œ ë³€ê²½ í•„ìˆ˜ê°’ìœ¼ë¡œ ë³€ê²½
  work               Int                       @default(0) //ì¶”ê°€
  deletedAt          DateTime? // ì†Œí”„íŠ¸ ì‚­ì œ
  designatedRequests DesignatedDriver[] // ì§€ì • ìš”ì²­ë°›ì€ ê²¬ì  ìš”ì²­ ëª©ë¡
  authUser           AuthUser                  @relation(fields: [authUserId], references: [id])
  serviceAreas       DriverServiceArea[] // í™œë™ ê°€ëŠ¥ ì§€ì—­
  estimates          Estimate[] // ê²¬ì  ì‘ë‹µ ëª©ë¡
  reviewsReceived    Review[] // ë°›ì€ ë¦¬ë·°
  estimateRejections DriverEstimateRejection[] // ê²¬ì  ìš”ì²­ ë°˜ë ¤ ê¸°ë¡

  averageRating Float      @default(0)
  favorite      Favorite[] // ì†Œë¬¸ìë¡œ ë³€ê²½

  languagePrefId String?             @unique // ì–¸ì–´ ì„¤ì • ID
  languagePref   LanguagePreference? @relation("DriverLanguage", fields: [languagePrefId], references: [id])
}

// ê¸°ì‚¬ë‹˜ í™œë™ ê°€ëŠ¥ ì§€ì—­ ì •ë³´ (ê¸°ì‚¬ 1ëª… â†’ ì—¬ëŸ¬ ì§€ì—­ ê°€ëŠ¥)
model DriverServiceArea {
  id       String     @id @default(cuid()) // ê³ ìœ  ì‹ë³„ì
  driverId String // í™œë™ ê¸°ì‚¬ ID (ì™¸ë˜ í‚¤)
  region   RegionType // ê´‘ì—­ì‹œ/ë„ (ì˜ˆ: ì„œìš¸, ê²½ê¸°)
  district String? // ì‹œ/êµ°/êµ¬ (ì˜ˆ: ê°•ë‚¨êµ¬, ìˆ˜ì›ì‹œ)

  driver Driver @relation(fields: [driverId], references: [id]) // ê¸°ì‚¬ì™€ ì—°ê²°

  @@unique([driverId, region, district]) // ê¸°ì‚¬ í•œ ëª…ì€ ê°™ì€ ì§€ì—­ì„ ì¤‘ë³µ ë“±ë¡í•  ìˆ˜ ì—†ìŒ
  @@index([region]) // ì§€ì—­ ë‹¨ìœ„ ì¡°íšŒìš© ì¸ë±ìŠ¤
  @@index([district]) // ì‹œ/êµ°/êµ¬ ë‹¨ìœ„ ì¡°íšŒìš© ì¸ë±ìŠ¤
}

// ì£¼ì†Œ ì •ë³´ í…Œì´ë¸” (ê³ ê°, ê¸°ì‚¬ í™œë™ì§€, ì´ì‚¬ ìš”ì²­ ë“±ì— ì‚¬ìš©ë˜ëŠ” ê¸°ë³¸ ì£¼ì†Œ í…Œì´ë¸”)
model Address {
  id         String     @id @default(cuid()) // ì£¼ì†Œ ê³ ìœ  ID
  postalCode String // ìš°í¸ë²ˆí˜¸
  street     String // ë„ë¡œëª… ì£¼ì†Œ
  detail     String? // ìƒì„¸ ì£¼ì†Œ (ë™, í˜¸ ë“±)
  region     RegionType // ê´‘ì—­ì‹œ/ë„
  district   String // ì‹œ/êµ°/êµ¬

  // ì´ì‚¬ ìš”ì²­ì—ì„œ ì¶œë°œì§€/ë„ì°©ì§€ë¡œ ì‚¬ìš©ë˜ëŠ” ê²½ìš°
  requestsFrom EstimateRequest[] @relation("RequestFrom") // ì¶œë°œ ì£¼ì†Œë¡œ ì‚¬ìš©ëœ ìš”ì²­ ëª©ë¡
  requestsTo   EstimateRequest[] @relation("RequestTo") // ë„ì°© ì£¼ì†Œë¡œ ì‚¬ìš©ëœ ìš”ì²­ ëª©ë¡

  // ê³ ê° ì£¼ì†Œ ì—°ê²° (ë‹¤ëŒ€ë‹¤, CustomerAddress í†µí•´ ì—°ê²°ë¨)
  customerAddresses CustomerAddress[]

  @@unique([postalCode, street, detail]) // ì¤‘ë³µ ì£¼ì†Œ ë“±ë¡ ë°©ì§€
  @@index([region]) // ê´‘ì—­ì‹œ/ë„ í•„í„°ë§ ì¸ë±ìŠ¤
  @@index([district]) // ì‹œ/êµ°/êµ¬ í•„í„°ë§ ì¸ë±ìŠ¤
}

// ê³ ê°ì´ ë“±ë¡í•œ ì£¼ì†Œ ì •ë³´ì™€ì˜ ì—°ê²° í…Œì´ë¸”
// ê³ ê°ê³¼ ì£¼ì†Œ ê°„ ë‹¤ëŒ€ë‹¤ ê´€ê³„ë¥¼ ì •ì˜í•˜ê³ , ì£¼ì†Œì˜ ìš©ë„(role)ë¥¼ ëª…ì‹œí•¨ (ì¶œë°œì§€, ë„ì°©ì§€, ê¸°íƒ€)
// customLabelì„ í†µí•´ "íšŒì‚¬", "ì°½ê³ " ë“± ì‹ë³„ ê°€ëŠ¥í•œ ì´ë¦„ ì§€ì • ê°€ëŠ¥
model CustomerAddress {
  id          String      @id @default(cuid()) // ê³ ìœ  ID
  customerId  String // ì—°ê²°ëœ ê³ ê° ID
  addressId   String // ì—°ê²°ëœ ì£¼ì†Œ ID
  role        AddressRole // ì£¼ì†Œì˜ ìš©ë„ (FROM, TO, EXTRA)
  customLabel String? // ì„ íƒ: "íšŒì‚¬", "ì°½ê³ " ë“± ë¼ë²¨
  createdAt   DateTime    @default(now()) // ì—°ê²° ìƒì„± ì‹œê°
  updatedAt   DateTime    @updatedAt // ë§ˆì§€ë§‰ ìˆ˜ì • ì‹œê°
  deletedAt   DateTime? // ì†Œí”„íŠ¸ ì‚­ì œ ì‹œê° (nullì´ë©´ ìœ íš¨)

  customer Customer @relation(fields: [customerId], references: [id]) // ê³ ê° ì°¸ì¡°
  address  Address  @relation(fields: [addressId], references: [id]) // ì£¼ì†Œ ì°¸ì¡°

  @@unique([customerId, addressId, role]) // ê°™ì€ ê³ ê°ì´ ë™ì¼í•œ ì£¼ì†Œë¥¼ ë™ì¼í•œ ìš©ë„ë¡œ ì¤‘ë³µ ì—°ê²° ê¸ˆì§€
  @@index([deletedAt]) // ì†Œí”„íŠ¸ ì‚­ì œëœ ë°ì´í„° í•„í„°ë§ìš© ì¸ë±ìŠ¤
  @@index([customerId]) // ê³ ê° ID ê¸°ë°˜ ë¹ ë¥¸ ì¡°íšŒ
  @@index([addressId]) // ì£¼ì†Œ ID ê¸°ë°˜ ë¹ ë¥¸ ì¡°íšŒ
}

// ê²¬ì  ìš”ì²­ (ê³ ê° â†’ ê¸°ì‚¬)
model EstimateRequest {
  id            String        @id @default(cuid())
  customerId    String // ê³ ê° ID
  moveType      MoveType // ì´ì‚¬ ìœ í˜•
  moveDate      DateTime // ì´ì‚¬ ë‚ ì§œ
  fromAddressId String // ì¶œë°œì§€ ì£¼ì†Œ
  toAddressId   String // ë„ì°©ì§€ ì£¼ì†Œ
  status        RequestStatus // ìƒíƒœ

  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  deletedAt DateTime?

  estimates          Estimate[] // ê¸°ì‚¬ ì‘ë‹µë“¤
  review             Review? // ì—°ê²°ëœ ë¦¬ë·°
  designatedDrivers  DesignatedDriver[] // ê³ ê°ì´ ì§€ì • ìš”ì²­í•œ ê¸°ì‚¬ ëª©ë¡
  estimateRejections DriverEstimateRejection[] // ê¸°ì‚¬ë“¤ì˜ ë°˜ë ¤ ê¸°ë¡
  customer           Customer                  @relation(fields: [customerId], references: [id])
  fromAddress        Address                   @relation("RequestFrom", fields: [fromAddressId], references: [id])
  toAddress          Address                   @relation("RequestTo", fields: [toAddressId], references: [id])
}

model DesignatedDriver {
  id                String   @id @default(cuid())
  estimateRequestId String // ì–´ë–¤ ê²¬ì  ìš”ì²­ì— ëŒ€í•œ ì§€ì • ìš”ì²­ì¸ì§€
  driverId          String
  createdAt         DateTime @default(now())

  estimateRequest EstimateRequest @relation(fields: [estimateRequestId], references: [id])
  driver          Driver          @relation(fields: [driverId], references: [id])

  @@unique([estimateRequestId, driverId]) // í•œ ìš”ì²­ì— ë™ì¼ ê¸°ì‚¬ë‹˜ì„ ì§€ì •í•  ìˆ˜ ì—†ìŒ
  @@index([estimateRequestId])
}

// ê²¬ì  ì‘ë‹µ (ê¸°ì‚¬ â†’ ê³ ê°)
model Estimate {
  id                String         @id @default(cuid())
  driverId          String // ê¸°ì‚¬ ID
  estimateRequestId String // ê²¬ì  ìš”ì²­ ID
  price             Int? // ì œì•ˆ ê°€ê²©
  comment           String? // ì½”ë©˜íŠ¸
  status            EstimateStatus @default(PROPOSED)
  rejectReason      String? // ë°˜ë ¤ ì‚¬ìœ 
  isDesignated      Boolean        @default(false) // ì§€ì • ê¸°ì‚¬ ì—¬ë¶€
  createdAt         DateTime       @default(now())
  updatedAt         DateTime       @updatedAt
  deletedAt         DateTime?

  driver          Driver          @relation(fields: [driverId], references: [id])
  estimateRequest EstimateRequest @relation(fields: [estimateRequestId], references: [id])

  @@unique([estimateRequestId, driverId])
}

// ë¦¬ë·° (1ê°œì˜ ê²¬ì  ìš”ì²­ ë‹¹ 1ê°œë§Œ ê°€ëŠ¥)
model Review {
  id                String          @id @default(cuid())
  customerId        String // ì‘ì„±ì
  driverId          String // ëŒ€ìƒ ê¸°ì‚¬ë‹˜
  estimateRequestId String // ì—°ê²°ëœ ê²¬ì  ìš”ì²­
  rating            Int // í‰ì 
  content           String // ë¦¬ë·° ë‚´ìš©
  createdAt         DateTime        @default(now())
  updatedAt         DateTime        @updatedAt
  deletedAt         DateTime? // ì†Œí”„íŠ¸ ì‚­ì œ
  writer            Customer        @relation(fields: [customerId], references: [id])
  driver            Driver          @relation(fields: [driverId], references: [id])
  request           EstimateRequest @relation(fields: [estimateRequestId], references: [id])

  @@unique([estimateRequestId])
}

// ì°œ ê¸°ëŠ¥ (ê³ ê°ì´ ê¸°ì‚¬ë‹˜ì„ ì°œ)
model Favorite {
  id         String    @id @default(cuid())
  customerId String // ì°œí•œ ì‚¬ëŒ
  driverId   String // ì°œ ë‹¹í•œ ê¸°ì‚¬
  createdAt  DateTime  @default(now())
  updatedAt  DateTime  @updatedAt
  deletedAt  DateTime?

  customer Customer @relation(fields: [customerId], references: [id])
  driver   Driver   @relation(fields: [driverId], references: [id])

  @@unique([customerId, driverId])
}

// ì•Œë¦¼ ê¸°ëŠ¥
model Notification {
  id        String           @id @default(cuid())
  message   String // ì•Œë¦¼ ë‚´ìš©
  path      String // í´ë¦­ ì‹œ ì´ë™
  type      NotificationType // ì•Œë¦¼ ì¢…ë¥˜
  isRead    Boolean          @default(false) // ì½ìŒ ì—¬ë¶€
  createdAt DateTime         @default(now())
  updatedAt DateTime         @updatedAt
  deletedAt DateTime?

  receiverId String // ìˆ˜ì‹ ì ID
  senderId   String? // ë°œì‹ ì ID

  receiver AuthUser  @relation("ReceivedNoti", fields: [receiverId], references: [id])
  sender   AuthUser? @relation("SentNoti", fields: [senderId], references: [id])
}

// ë‹¤êµ­ì–´ ì„¤ì •
model LanguagePreference {
  id       String   @id @default(cuid())
  language LangCode // ì–¸ì–´ ì½”ë“œ (ko, en, zh)
  value    String? // ê¸°íƒ€ ì»¤ìŠ¤í…€ ì„¤ëª…

  customer Customer? @relation("CustomerLanguage")
  driver   Driver?   @relation("DriverLanguage")
}

// ê¸°ì‚¬ ê²¬ì  ìš”ì²­ ë°˜ë ¤ ê¸°ë¡
model DriverEstimateRejection {
  id                String   @id @default(cuid())
  estimateRequestId String
  driverId          String
  reason            String?
  createdAt         DateTime @default(now())

  estimateRequest EstimateRequest @relation(fields: [estimateRequestId], references: [id])
  driver          Driver          @relation(fields: [driverId], references: [id])

  @@unique([estimateRequestId, driverId])
  @@index([driverId])
  @@index([estimateRequestId])
}
